# دليل تحديث تطبيق LaVish Center
===============================================

## الملفات المرفقة:

### 1. admin.html
لوحة التحكم الكاملة للتطبيق - صفحة واحدة تحتوي على:
- نظام تسجيل دخول آمن
- إدارة الأقسام (إضافة/حذف)
- إدارة المنتجات (إضافة/حذف/تعديل)
- إدارة الإعلانات المنبثقة
- إدارة البنرات المتحركة
- عرض الطلبات الواردة من العملاء
- إحصائيات شاملة

### 2. app-updated.js
ملف JavaScript المحدث للتطبيق الرئيسي يحتوي على:
- اتصال بقاعدة بيانات Firebase
- جلب المنتجات والأقسام من Firebase
- جلب الإعلانات والبنرات من Firebase
- نظام السلة المحدث
- نموذج بيانات العميل
- إرسال الطلبات إلى Firebase و WhatsApp

===============================================

## خطوات التحديث:

### الخطوة 1: تحديث ملف index.html
أضف هذه الأسطر قبل نهاية الـ `</body>`:

```html
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<!-- استبدل app.js بـ app-updated.js -->
<script src="app-updated.js"></script>
```

### الخطوة 2: رفع الملفات
1. ارفع ملف `admin.html` إلى السيرفر
2. ارفع ملف `app-updated.js` إلى السيرفر
3. استبدل `app.js` القديم بـ `app-updated.js`

### الخطوة 3: إعداد Firebase Authentication
1. افتح Firebase Console
2. اذهب إلى Authentication
3. فعّل Email/Password authentication
4. أضف مستخدم جديد للدخول إلى لوحة التحكم

### الخطوة 4: إعداد قاعدة البيانات
قواعد Firebase Database المقترحة:

```json
{
  "rules": {
    "categories": {
      ".read": true,
      ".write": "auth != null"
    },
    "products": {
      ".read": true,
      ".write": "auth != null"
    },
    "popupAds": {
      ".read": true,
      ".write": "auth != null"
    },
    "banners": {
      ".read": true,
      ".write": "auth != null"
    },
    "orders": {
      ".read": "auth != null",
      ".write": true
    }
  }
}
```

===============================================

## استخدام لوحة التحكم:

### تسجيل الدخول:
1. افتح `admin.html` في المتصفح
2. أدخل البريد الإلكتروني وكلمة المرور
3. اضغط تسجيل الدخول

### إضافة قسم جديد:
1. اذهب إلى تبويب "الأقسام"
2. أدخل اسم القسم (مثال: ملابس نسائية)
3. أدخل معرف القسم بالإنجليزية (مثال: women)
4. اختر الأيقونة (مثال: fa-venus)
5. اضغط "إضافة قسم"

### إضافة منتج جديد:
1. اذهب إلى تبويب "المنتجات"
2. املأ جميع البيانات:
   - اسم المنتج
   - القسم
   - السعر
   - السعر القديم (اختياري)
   - رابط الصورة
   - الوصف
   - الشارة (جديد/تخفيض/مميز)
   - التقييم
   - عدد التقييمات
3. اضغط "إضافة منتج"

### إضافة إعلان منبثق:
1. اذهب إلى تبويب "الإعلانات المنبثقة"
2. أدخل عنوان الإعلان
3. أدخل وصف الإعلان
4. أدخل رابط صورة الإعلان
5. أدخل السعر القديم والجديد
6. اختر حالة الإعلان (نشط/غير نشط)
7. اضغط "إضافة إعلان منبثق"

### إضافة بنر متحرك:
1. اذهب إلى تبويب "الإعلانات المتحركة"
2. أدخل عنوان البنر
3. أدخل النص الفرعي
4. أدخل رابط صورة البنر
5. أدخل رابط الصفحة (اختياري)
6. اختر حالة البنر (نشط/غير نشط)
7. اضغط "إضافة بنر"

### عرض الطلبات:
1. اذهب إلى تبويب "الطلبات"
2. ستظهر جميع الطلبات الواردة من العملاء
3. يمكنك:
   - عرض تفاصيل كل طلب
   - التواصل مع العميل عبر WhatsApp
   - حذف الطلب

===============================================

## كيفية عمل التطبيق الرئيسي:

### 1. عند فتح التطبيق:
- يتم تحميل جميع البيانات من Firebase تلقائياً
- عرض الأقسام الديناميكية
- عرض المنتجات حسب الأقسام
- عرض البنرات المتحركة
- إظهار الإعلان المنبثق بعد ثانيتين

### 2. عند إضافة منتج إلى السلة:
- يتم حفظ المنتج في السلة
- تحديث عدد المنتجات في الأيقونة
- حفظ السلة في localStorage

### 3. عند إتمام الطلب:
- يظهر نموذج بيانات العميل
- العميل يدخل: الاسم، رقم الهاتف، المحافظة، العنوان
- عند الضغط على "تأكيد الطلب":
  ✓ يتم حفظ الطلب في Firebase (قسم orders)
  ✓ يتم إنشاء رسالة WhatsApp تحتوي على:
    - بيانات العميل
    - المنتجات المطلوبة
    - الإجمالي
  ✓ فتح WhatsApp تلقائياً لإرسال الطلب
  ✓ مسح السلة

### 4. في لوحة التحكم:
- تظهر الطلبات فوراً
- يمكن الاطلاع على جميع التفاصيل
- التواصل المباشر مع العميل

===============================================

## الميزات الإضافية:

### 1. PWA (Progressive Web App):
- التطبيق يعمل كتطبيق موبايل
- يمكن تثبيته على الهاتف
- يعمل بدون إنترنت (للصفحات المحفوظة)

### 2. الإشعارات:
- إشعارات عند إضافة منتج
- إشعارات عند إتمام الطلب

### 3. المفضلة:
- يمكن للعميل إضافة منتجات للمفضلة
- حفظ المفضلة في localStorage

### 4. البحث:
- بحث في المنتجات بالاسم أو الوصف

===============================================

## هيكل قاعدة البيانات في Firebase:

```
messageemeapp
├── categories
│   └── {categoryId}
│       ├── name: "ملابس نسائية"
│       ├── id: "women"
│       ├── icon: "fa-venus"
│       └── createdAt: timestamp
│
├── products
│   └── {productId}
│       ├── name: "فستان سهرة"
│       ├── category: "women"
│       ├── price: 149900
│       ├── oldPrice: 250000
│       ├── image: "https://..."
│       ├── description: "..."
│       ├── badge: "sale"
│       ├── rating: 4.8
│       ├── reviews: 128
│       ├── discount: "-40%"
│       └── createdAt: timestamp
│
├── popupAds
│   └── {adId}
│       ├── title: "عرض خاص"
│       ├── description: "..."
│       ├── image: "https://..."
│       ├── oldPrice: 250000
│       ├── newPrice: 149900
│       ├── productId: "..."
│       ├── active: true
│       └── createdAt: timestamp
│
├── banners
│   └── {bannerId}
│       ├── title: "تخفيضات الصيف"
│       ├── subtitle: "خصومات تصل إلى 50%"
│       ├── image: "https://..."
│       ├── link: "women"
│       ├── active: true
│       └── createdAt: timestamp
│
└── orders
    └── {orderId}
        ├── customer
        │   ├── name: "أحمد محمد"
        │   ├── phone: "07XXXXXXXXX"
        │   ├── city: "بغداد"
        │   └── address: "..."
        ├── items: []
        ├── total: 299800
        ├── timestamp: timestamp
        └── status: "new"
```

===============================================

## ملاحظات مهمة:

### الأمان:
1. لا تشارك بيانات تسجيل الدخول لأحد
2. استخدم كلمة مرور قوية
3. فعّل Two-Factor Authentication في Firebase

### الأداء:
1. استخدم صور محسّنة (WebP)
2. الحجم المثالي للصور: 800x800 بكسل
3. استضف الصور على CDN

### الصيانة:
1. احتفظ بنسخة احتياطية من Firebase
2. راقب الطلبات بشكل يومي
3. حدّث المنتجات بانتظام

===============================================

## حل المشاكل الشائعة:

### المشكلة: لا تظهر المنتجات
الحل: تأكد من:
- اتصال الإنترنت
- قواعد Firebase Database
- صحة روابط الصور

### المشكلة: لا يعمل تسجيل الدخول
الحل:
- تأكد من تفعيل Email/Password في Firebase
- تحقق من البريد الإلكتروني وكلمة المرور

### المشكلة: لا تصل الطلبات
الحل:
- تحقق من قواعد Firebase
- تأكد من عمل الإنترنت
- تحقق من Console في المتصفح

===============================================

## الدعم الفني:

للمساعدة أو الاستفسارات، يمكنك:
1. مراجعة Firebase Console للأخطاء
2. فحص Console في المتصفح (F12)
3. التأكد من جميع الروابط صحيحة

===============================================

## بيانات الاتصال بالواتساب:

رقم الواتساب المستخدم حالياً: +964 781 379 8636

لتغيير الرقم:
1. افتح ملف app-updated.js
2. ابحث عن: const whatsappNumber = '9647813798636';
3. غيّر الرقم بالرقم الجديد (بدون + أو 00)
4. احفظ الملف وارفعه للسيرفر

===============================================

تم بحمد الله إنشاء نظام متكامل لإدارة متجر LaVish Center!

جميع الملفات جاهزة للاستخدام ✅